import { Env_M } from "@/envVar";
import { operationInfo } from "../MILY/generalMailService";
import { ASCII_Table } from "./ASCII_Table";
import { TabilizeM } from "./htmlTableTxt";
import { Titled_oldFashionedTable } from "./oldFashionedHTML_table";

export function composeBody(body: string, operationInfo?: operationInfo) {
  
  delete operationInfo?.data._id;

  console.log('composed a body for\r\n\r\n',ASCII_Table(operationInfo));

  if (!operationInfo) {
    bodyM = body
    return `
    <div style="margin: 48px;">
      ${bodyM}
    </div>
    `;
  }


  var restInfo = {...operationInfo};
  delete restInfo.data;
  delete restInfo.influencer;

  var bodyM = `

  <h3>${body}</h3>

  <br><br>

  <h1>Associated Data</h1>
  ${Titled_oldFashionedTable(operationInfo.data, "Data Pushed at database")}

  ${Titled_oldFashionedTable(operationInfo.influencer, "User associated with action")}

  ${Titled_oldFashionedTable(restInfo, "Overall Operation Status")}
  
  <h1>Conclusion</h1>

  <pre style='font-family:monospace'>
  
  Document of ${Env_M.EDITION.FOR}           
  Created at ${new Date().toUTCString()} 
                                          
  Generated by,                         
  Business Administration                  
  A Sinensis Production (2)                

  </pre>

  `;

  //   <pre style='font-family:monospace'>
  // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  // |                                          |
  // | Document of ${Env_M.EDITION.FOR}           |
  // | Created at ${new Date().toUTCString()} |
  // |                                          |
  // | Generated by ,                           |
  // | Business Administration                  |
  // | A Sinensis Production (2)                |
  // |                                          |
  // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  // </pre>


  return `
  <div style="padding: 48px;min-width:800px;">
    ${bodyM}
  </div>
  `;
}
